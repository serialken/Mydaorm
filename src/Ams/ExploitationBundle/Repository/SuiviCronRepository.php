<?php

namespace Ams\ExploitationBundle\Repository;

use Doctrine\ORM\EntityRepository;
use Doctrine\DBAL\DBALException;

/**
 * Class SuiviCronRepository
 * 
 * @package Ams\ExploitationBundle\Repository
 */
class SuiviCronRepository extends EntityRepository 
{
    public $tableName = "suivi_de_cron";
    
    /**
     * 
     * @param type $id
     * @return type
     */
    public function getEtatById($id){
        $sql = "SELECT etat FROM ".$this->tableName."   WHERE id = ".$id."  ";
        return $this->_em->getConnection()->fetchAll($sql);
    }
    
    /**
     * 
     * @param type $param
     * @param type $id
     * @throws DBALException
     */
    public function updateEtatById($param, $id){
         try {
            $this->_em->getConnection()->update($this->tableName, $param, array("id" => $id));
        } 
        catch (DBALException $ex) {
            throw $ex;
        }
    }
}
